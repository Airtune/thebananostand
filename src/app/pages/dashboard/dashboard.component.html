<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; height: 40px">
    <div>
        <button
            *ngIf="isEditing"
            style="margin-right: 16px"
            mat-stroked-button
            color="warn"
            (click)="hideSelected()"
            [disabled]="selectedItems.size === 0"
        >
            <mat-icon style="margin-right: 8px; margin-left: -4px">remove_circle</mat-icon>
            <span>Hide Selected</span>
        </button>

        <!--
            <mat-form-field appearance="outline" style="width: 150px">
                <mat-label>Add Account</mat-label>
                <input matInput type="text" [(ngModel)]="manualAddIndex">
                <button *ngIf="manualAddIndex" matSuffix mat-icon-button color="primary" aria-label="Clear" (click)="addAccountFromIndex(manualAddIndex)">
                    <mat-icon>add</mat-icon>
                </button>
            </mat-form-field>
            -->
        <button mat-flat-button color="primary" (click)="addAccount()" [disabled]="loadingAccount">
            <mat-icon style="margin-right: 8px; margin-left: -4px">add</mat-icon>
            <span>Add Account</span>
        </button>
    </div>

    <mat-slide-toggle color="accent" [(ngModel)]="isEditing" (change)="exitEdit($event)"
        >Manage Dashboard</mat-slide-toggle
    >
</div>
<mat-card>
    <div style="margin-left: 16px; margin-bottom: 16px">
        <mat-checkbox
            *ngIf="isEditing"
            style="margin-right: 40px"
            (change)="toggleAll($event)"
            [indeterminate]="selectedItems.size < getAccounts().length && selectedItems.size > 0"
            [checked]="selectedItems.size === getAccounts().length"
        >
        </mat-checkbox>
        <span class="mat-subheading-1" style="margin-right: 8px">Accounts Balance: </span>{{ getBalance() }}
    </div>
    <mat-divider></mat-divider>

    <!--
    <blui-empty-state *ngIf="getAccounts().length === 0" title="No Accounts" description="You can manually add accounts.">
        <mat-icon blui-empty-icon>error</mat-icon>
    </blui-empty-state>
    -->

    <mat-nav-list style="max-height: 60vh; overflow: auto" *ngIf="getAccounts().length > 0" [disableRipple]="isEditing">
        <blui-info-list-item
            *ngFor="let account of getAccounts()"
            divider="partial"
            [statusColor]="showRepresentativeOffline(account.representative) ? colors.red[500] : undefined"
            [hidePadding]="true"
            (click)="openAccount(account.fullAddress)"
        >
            <mat-checkbox
                *ngIf="isEditing"
                blui-icon
                color="accent"
                (click)="$event.stopPropagation()"
                [checked]="selectedItems.has(account.index)"
                (change)="toggleCheck($event, account)"
            >
            </mat-checkbox>
            <div blui-left-content style="min-width: 100px">
                <blui-list-item-tag [label]="'Account #' + account.index"></blui-list-item-tag>
            </div>
            <div blui-title>{{ account.shortAddress }}</div>
            <div blui-subtitle>
                <ng-container *ngIf="account.representative">
                    represented by {{ formatRepresentative(account.representative) }}
                </ng-container>
                <ng-container *ngIf="!account.representative"> unopened account </ng-container>
            </div>
            <div blui-right-content>
                <blui-list-item-tag
                    *ngIf="!account.representative"
                    label="Unopened Account"
                    [backgroundColor]="colors.gold[500]"
                >
                </blui-list-item-tag>
                <blui-list-item-tag
                    *ngIf="showRepresentativeOffline(account.representative)"
                    label="Rep Offline"
                    [backgroundColor]="colors.red[500]"
                    style="margin-right: 16px"
                ></blui-list-item-tag>

                <ng-container *ngIf="account.representative">
                    {{ account.formattedBalance }}
                </ng-container>
            </div>
        </blui-info-list-item>
    </mat-nav-list>
</mat-card>
